# DIY KEYBOARD1
## 特徴

・自作のPS/2キーボードです。

・インターフェイスはPS/2またはUART

・サイズは11×6cm。

・キーは57個。

## Files
・KEYBOARD1.COMP : CARDLUS X用の基板のCADデータ。

・diy_keyboard1_schematics.png : 回路図。

・keyb.c : ソースコード。

・nicokeyb.aps : プロジェクトファイル。2007年当時、AVR Studio 4+ WinAVRで開発していました。

・program_fuse.bat : 書き込み用のバッチファイル。

## PS/2の通信タイミング

・信号はDATAとCLOCKの2本です。それぞれ信号線は場合によって入力と出力の向きが変わります。

・キーボード側の信号はコレクタ出力です。システム側にはプルアップが必要になります。

・CLOCK信号はH→L→Hで1ビット送信とします。CLOCK信号は常にキーボードからシステムに対して送ります。もし、システム側からCLOCK信号にLが出力されている場合には通信できません。

・DATA信号は「スタートビット(L)」→「データビット(下位から順に8ビット)」→「パリティビット(奇数)」→「ストップビット(H)」の順番で送ります。

・キーボード側の受信時、システム側からDAT信号にLowが出力され、それがスタートビットとなります。正常に受信できた場合、ストップビットはLowにします。

・キーボード側の送信時、キーボード側からDAT信号にLowが出力され、それがスタートビットとなります。

参考資料：「ＯＡＤＧテクニカル・リファレンス  ハードウエア編  第4章キーボード」

## Parts
(U1)ATtiny2313

(U2)74HC164(SOP版)

(X1)発振子8MHz

(C1/2) 0.1μF積層セラミックコンデンサ	 

(CN1)DIN6P male	 

(D1/2/3/4/5/6/7/8)ダイオード	 

(SW)タクトスイッチ 57個

抵抗	 	 

LED	 	 

ポリスイッチ（リセットブルヒューズ）200mAで遮断。


